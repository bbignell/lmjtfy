<!DOCTYPE html>
<html>
<head>
  <title>Let me JIRA that for you...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google adsense js -->
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
      google_ad_client: "ca-pub-8722055387836846",
      enable_page_level_ads: true
    });
  </script>

  <!-- styles -->
  <link rel="stylesheet" href="main.css">
</head>
<body>
  <h1 class="floater">Let me JIRA that for you...</h1>
  <div class="floater">
    <form id="lmjtfy">
      <div class="container" style="display:none" id="instructions">
        <div>
          You must provide the following URL parameters to this page:
          <ul>
            <li>jira = The URL of your JIRA server, without the trailing slash<br>&nbsp;e.g. jira=http://jira.domain.com
            <li>projects = A comma-separated list of project names<br>&nbsp;e.g. projects=BOB,TECH
          </ul>
        </div>
      </div>
      <div class="container" style="display:none" id="searchDetails">
        <p>Searching in project(s) [__PROJECTS__] at __HOST__.</p>
      </div>
      <input type="text" name="query" id="query" tabindex="0" autofocus/>
      <div class="container">
        <div class="lefty">
          Do you need help finding that tricky ticket? Searching for a specific feature?
          Let me help you search JIRA for the information need! You may need to allow popups for this site in your browser settings.
        </div>
        <div>
          <input id="submit" type="button" class="button" value="LMJTFY" tabindex="0" disabled="disabled"/>
          <div id="spinner" class="spinner" style="display:none">
            <div class="rect1"></div>
            <div class="rect2"></div>
            <div class="rect3"></div>
            <div class="rect4"></div>
            <div class="rect5"></div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div class="floater ads">

  </div>

  <div class="bottom">
    <div class="floater">
      This website is a simple search utility and does not contain, own, or provide authorized access to
      any of the data presented. No guarantee is offered for the quality of the data. Users are responsible for
      appropriate use of data. For entertainment purposes only.
    </div>
  </div>

  <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
  <script
    src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
    crossorigin="anonymous"></script>


  <script src="main.js"></script>
  <script>
    $.extend(ELEMENTS, {instructions: $('#instructions'), searchDetails: $('#searchDetails')});

    var jira = getUrlParameter('jira');
    var projects = getUrlParameter('projects');

    if (jira.trim() === '' || projects.trim() === '') {
      ELEMENTS.instructions.show();
      ELEMENTS.searchButton.attr('disabled', 'disabled');
    } else {
      var text = ELEMENTS.searchDetails.html();
      console.log(text);
      ELEMENTS.searchDetails.html(text.replace('__PROJECTS__', projects).replace('__HOST__', jira)).show();
      JIRAS.set(jira, projects);
    }
  </script>
</body>
</html>
